@page "/Login"
@using BlazorUI.Authentication
@inject IAuthService authService
@inject NavigationManager navMgr



    
        <div class="col-xl-4 d-flex p-3">
            <RadzenCard Style="width: 100%;">
                <h2 class="mb-4">Please login</h2>
                <RadzenTemplateForm Data=@("SimpleLogin")>
                    <RadzenLogin AllowRegister="false" AllowResetPassword="false" Login=@(OnLogin) />
                </RadzenTemplateForm>
            </RadzenCard>
        </div>
<AuthorizeView>
    <Authorized>
        <div class="card">
            <h3>Hello, @context.User.Identity.Name</h3>
        </div>
    </Authorized>
</AuthorizeView>


@code {

    private async Task OnLogin(LoginArgs args)
    {
        try
        {
            await authService.LoginAsync(args.Username, args.Password);
            navMgr.NavigateTo("/");
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
            throw;
        }
    }
  
}